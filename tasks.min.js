var taskArray = [{ topics: [0, 1], tags: [], created: Date.now(), completed: 0, status: "backlog", title: "Example Task", content: "Example description", deadline: "08-01-2019", uid: 1, blockers: [], deleted: !1 }], topicObj = { 0: { name: "Example Topic", color: "blue", display: !0 }, 1: { name: "Example Topic 2", color: "red", display: !0 } }, baseHTML = `<div class="card" style="width: 100%; box-shadow: 2px 2px 10px -5px black;"><div class="card-body{{isBlocked}}"><h5 class="card-title"><span class="uid">{{uid}}</span>{{title}}</h5>{{blockers}}{{deadline}}{{badges}}</div></div>`, badgeBase = `<div class="badgeContainer">{{badges}}</div>`, deadlineHTML = `<span class="deadline">deadline: {{dl}}</span>`, blockersHTML = `<span class="blockers">blocked by:{{blockers}}</span>`, blockerHTML = `<span class="taskNumber">{{task}}</span>`, badgeHTML = `<span class="badge badge-{{class}} mr-1"{{color}}>{{name}}</span>`, colorHTML = ` style="background-color: {{col}}" `, constructTemplate = (a, c) => { return Object.keys(c).forEach(d => { a = a.replace(`{{${d}}}`, c[d]) }), a }, populateTasks = () => { taskArray.forEach(a => { if (!a.deleted) { var c = ""; if (a.topics) { var d = ""; a.topics.forEach(h => { if (topicObj[h].display) { var i = ""; topicObj[h].color && (i = constructTemplate(colorHTML, { col: topicObj[h].color })), d += constructTemplate(badgeHTML, { color: i, "class": "primary", name: topicObj[h].name }) } }), c = constructTemplate(badgeBase, { badges: d }) } var e = ""; a.deadline && (e = constructTemplate(deadlineHTML, { dl: a.deadline })); var f = ""; if (a.blockers.length) { var g = ""; a.blockers.forEach(h => { g += constructTemplate(blockerHTML, { task: h }) }), f = constructTemplate(blockersHTML, { blockers: g }) } $(`#${a.status}Cards`).append(constructTemplate(baseHTML, { blockers: f, isBlocked: a.blockers.length ? " blocked" : "", title: a.title, deadline: e, badges: c, uid: a.uid })) } }) }; $(document).ready(function () { populateTasks() });